//@ts- nocheck

import HeaderAdmin from '@/shared/components/headerAdmin'
import type { NextPage } from 'next'
import Head from 'next/head'
import { serverSideTranslations } from 'next-i18next/serverSideTranslations'
import { useEffect, useState } from 'react'
import { getProducts } from '@/shared/services/products'
import { instanceAxios } from '@/shared/helpers/instanceAxios'
import { useQuery } from '@tanstack/react-query'
import { AxiosResponse } from 'axios'
import { Box } from '@chakra-ui/react'
import { useRouter } from 'next/router'

const AdminDashboard: NextPage = () => {
  const [prod, setProd] = useState()
  const { push } = useRouter()

  // useEffect(() => {
  //   try {
  //     const produ = await getProducts()
  //     setProd(produ)
  //   } catch (error) {
  //     console.log(error)
  //   }
  // }, [])

  // useEffect(() => {
  //   const getProducts = async () => {
  //     try {
  //       const response = await instanceAxios({ method: 'GET', url: 'products' })
  //       setProd(response)
  //     } catch (err) {
  //       console.log(err)
  //     }
  //   }
  //   getProducts()
  // }, [])

  // useEffect(() => {
  //   async function getPro() {
  //     const data = await fetch('/api/products')
  //     const res = await data.json()
  //     setProd(res)
  //   }
  //   getPro()
  // }, [])

  const { data, status } = useQuery({
    queryKey: ['products'],
    queryFn: getProducts,
  })

  console.log(data?.data?.result?.data, 'query')

  return (
    <div>
      <Head>
        <title>Admin | Dashboard</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <HeaderAdmin />
      <p>Status: {status}</p>
      <Box>
        <Box onClick={() => push('/admin')}>Dashboard</Box>
        <Box onClick={() => push('/admin/products')}>Products</Box>
        <Box onClick={() => push('/admin/restaurants')}>Restuarants</Box>
        <Box>Category</Box>
        <Box>Orders</Box>
        <Box>Offers</Box>
        <Box className=" sm:hidden ">LogOut</Box>
      </Box>
    </div>
  )
}

export default AdminDashboard

export async function getStaticProps({ locale }: { locale: any }) {
  return {
    props: { ...(await serverSideTranslations(locale, ['admin'])) },
  }
}
